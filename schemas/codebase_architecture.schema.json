{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CodebaseArchitecture",
  "type": "object",
  "required": [
    "tech_stack",
    "architecture_patterns",
    "system_design",
    "code_organization"
  ],
  "properties": {
    "tech_stack": {
      "type": "object",
      "required": ["framework"],
      "properties": {
        "framework": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "language": {
          "type": "string"
        },
        "database": {
          "type": "string"
        },
        "cache": {
          "type": "string"
        },
        "queue": {
          "type": "string"
        },
        "key_dependencies": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "version": {
                "type": "string"
              },
              "purpose": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "architecture_patterns": {
      "type": "object",
      "required": ["application_architecture"],
      "properties": {
        "application_architecture": {
          "type": "string"
        },
        "design_patterns": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "architectural_style": {
          "type": "string"
        },
        "service_boundaries": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "system_design": {
      "type": "object",
      "required": ["components"],
      "properties": {
        "components": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "type"],
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string"
              },
              "location": {
                "type": "string"
              },
              "responsibilities": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "data_flow": {
          "type": "string"
        },
        "integration_points": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string"
              },
              "direction": {
                "type": "string"
              },
              "authentication": {
                "type": "string"
              }
            }
          }
        },
        "authentication": {
          "type": "string"
        },
        "multi_tenancy": {
          "type": "string"
        }
      }
    },
    "code_organization": {
      "type": "object",
      "properties": {
        "directory_structure": {
          "type": "object"
        },
        "naming_conventions": {
          "type": "object"
        },
        "file_organization": {
          "type": "string"
        }
      }
    },
    "database_design": {
      "type": "object",
      "properties": {
        "orm": {
          "type": "string"
        },
        "migration_pattern": {
          "type": "string"
        },
        "key_tables": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "relationships": {
          "type": "string"
        }
      }
    },
    "api_design": {
      "type": "object",
      "properties": {
        "style": {
          "type": "string"
        },
        "versioning": {
          "type": "string"
        },
        "authentication": {
          "type": "string"
        },
        "error_format": {
          "type": "string"
        },
        "response_format": {
          "type": "string"
        }
      }
    },
    "testing_strategy": {
      "type": "object",
      "properties": {
        "frameworks": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "test_types": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "test_organization": {
          "type": "string"
        },
        "coverage_approach": {
          "type": "string"
        }
      }
    },
    "conventions": {
      "type": "object",
      "properties": {
        "code_style": {
          "type": "string"
        },
        "git_workflow": {
          "type": "string"
        },
        "documentation": {
          "type": "string"
        }
      }
    },
    "dependencies": {
      "type": "object",
      "properties": {
        "external_services": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "infrastructure": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "recommendations": {
      "type": "object",
      "properties": {
        "strengths": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "improvements": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "patterns_to_follow": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "patterns_to_avoid": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}

